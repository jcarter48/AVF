Ti.UI.setBackgroundColor("#ffffff");
//win for first page, input page
var win = Ti.UI.createWindow({
	//backgroundColor: "#ffffff",
	backgroundImage : "background.png",
	backgroundRepeat : "repeat",
	layout : "vertical",
	top : 20
});
var logo = Ti.UI.createImageView({
	image : "logo.png",
	top : 100
});
//videoPlayer
var videoPlayer = Titanium.Media.createVideoPlayer({
	top : 20,
	backgroundColor : 'blue',
	//autoplay : false,
	height : 360,
	width : 640,
	mediaControlStyle : Titanium.Media.VIDEO_CONTROL_DEFAULT,
	scalingMode : Titanium.Media.VIDEO_SCALING_ASPECT_FIT
});
//win for 2nd page for basic data
var buttonView = Ti.UI.createView({
	layout: "horizontal",
	width: 768,
	height: 50,
	borderColor : "#900",
	borderWidth: 3
});
var buttonView2 = Ti.UI.createView({
	layout: "horizontal",
	width: 768,
	height: 50,
	borderColor : "#009",
	backgroundColor : "#090",
	borderWidth: 3
});
var infoWin = Ti.UI.createWindow({
	backgroundColor : "#900",
	layout : "horizontal",
	top : 0,
	// backgroundImage : "background.png",
	backgroundRepeat : "repeat"
});
//win for 3rd page recent matches
// var matchWin = Ti.UI.createWindow({
	// backgroundColor : "#fff",
	// layout : "horizontal",
	// top : 20,
	// // backgroundImage : "background.png",
	// backgroundRepeat : "repeat"
// });
//scrollview for first page
var viewContainer = Ti.UI.createScrollView({
	layout : "vertical",
	// backgroundImage : "background.png",
	backgroundRepeat : "repeat",
	//top : 10,
	//backgroundColor : "#fff"
	showVerticalScrollIndicator : true
});
//scrollview for basic data
var viewContainer2 = Ti.UI.createScrollView({
	layout : "vertical",
	top : 10,
	showVerticalScrollIndicator : true,
	borderColor : "#090",
	backgroundColor: "#000",
	borderWidth: 3, 
	height : 300
});
//scrollview for recent matches
var viewContainer3 = Ti.UI.createScrollView({
	layout : "vertical",
	//top : 10,
	showVerticalScrollIndicator : true
});

var infoButton = Titanium.UI.createButton({
	title : 'Stats',
	color : "#444349",
	backgroundColor : "#ffffff",
	//top: 50,
	width : 384,
	height : 50,
	//left: 150,
	borderColor : "#444349",
	borderWidth : 6,
	font : {
		fontSize : 24
	}
});
infoButton.addEventListener("singletap", function(e) {
	//console.log("infobutton works");
	matchWin.close();
	infoWin.open();
});
var matchButton = Titanium.UI.createButton({
	title : 'Recent Matches',
	color : "#444349",
	backgroundColor : "#ffffff",
	//top: 50,
	width : 384,
	height : 50,
	// right: 150,
	borderColor : "#444349",
	borderWidth : 6,
	font : {
		fontSize : 24
	}
});
matchButton.addEventListener("singletap", function(e) {
	//console.log("matchbutton works");
	infoWin.close();
	matchWin.open();
});

var format1 = {
	text : "...",
	color : "#ffffff",
	font : {
		fontSize : 64
	},
	top : 10
};

win.add(viewContainer);
win.open();
// buttonView2.add(infoButton);
// buttonView2.add(matchButton);
// matchWin.add(viewContainer3);
//textfield
var textField = Ti.UI.createTextField({
	borderStyle : Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
	width : 250,
	height : 60,
	top : 20,
	hintText : "Summmoner Name",
	color : "#444349",
	backgroundColor : "#ffffff",
	borderRadius : 10
});



viewContainer.add(logo);
viewContainer.add(textField);
//win.add(textField);

//button
var textButton = Ti.UI.createButton({
	title : 'Search!',
	height : 60,
	width : 150,
	top : 20,
	font : {
		fontSize : 32
	},
	color : "#444349",
	backgroundColor : "#ffffff",
	borderRadius : 10

});

//click event textfield.value
textButton.addEventListener('click', function() {
	//console.log(textField.value);
	var apiModule = require("api");
	apiModule.getData1(textField.value);
	//buildUI();
	//alert('I was clicked!');
});

viewContainer.add(textButton);
//win.add(textButton);
videoPlayer.url = 'theBasics.mp4';
//win.add(videoPlayer);
viewContainer.add(videoPlayer);
//require api
//fire getData
//pass textfield.value
var statsView = Ti.UI.createView({
	layout: "vertical"
});
var summonerLbl = Ti.UI.createLabel(format1);
var queueLbl = Ti.UI.createLabel(format1);
var nameLbl = Ti.UI.createLabel(format1);
var tierLbl = Ti.UI.createLabel(format1);
var winsLbl = Ti.UI.createLabel(format1);

var buildUI = function(obj) {
	win.close();
	//console.log("obj-buildUI", obj);

	//console.log(obj, "this is obj");
	summonerLbl.text = obj.summoner;
	queueLbl.text = obj.queue;
	nameLbl.text = obj.name;
	tierLbl.text = obj.tier + " " + obj.division + " " + obj.leaguePoints + " lp";
	winsLbl.text = "W/L: " + obj.wins + "/" + obj.losses;
	
	statsView.add(summonerLbl);
	statsView.add(queueLbl);
	statsView.add(nameLbl);
	statsView.add(tierLbl);
	statsView.add(winsLbl);

	var winLoss = "";
	//console.log(obj.recent, "......");

	for (var i = 0,
	    j = obj.recent.length; i < j; i++) {
	    	
	    	//parent view - layout horz
	    	// win, kills, deaths,assists, cs, time as labels
	    var matchView = Ti.UI.createView({
	    	layout: "horizontal",
	    	top: 10
	    });
	    var winLabel = Ti.UI.createLabel({
	    	text: "...",
	    	color: "#ffffff",
	    	backgroundColor: "ffffff",
			font : {
				fontSize : 52
			},
	    });
	    var kdaLabel = Ti.UI.createLabel({
	    	text: obj.recent[i].kills + "/" + obj.recent[i].deaths + "/" + obj.recent[i].assists,
	    	color: "#ffffff",
	    	backgroundColor: "ffffff",
	    	font : {
				fontSize : 52
			},
	    });
	    var csLabel = Ti.UI.createLabel({
	    	text: obj.recent[i].cs,
	    	color: "#ffffff",
	    	backgroundColor: "ffffff",
	    	font : {
				fontSize : 52
			},
	    });
	    var timeLabel = Ti.UI.createLabel({
	    	text: obj.recent[i].playTime,
	    	color: "#ffffff",
	    	backgroundColor: "ffffff",
	    	font : {
				fontSize : 52
			},
	    });
	    
	    matchView.add(winLabel);
	    matchView.add(kdaLabel);
	   	matchView.add(csLabel);
	   	matchView.add(timeLabel);

		//console.log(obj.recent[i].win, "......");
		if (obj.recent[i].win === true) {
			winLabel.color = "#41EB45";
			winLabel.text = "Won ";
			//winLoss = "Won";
		} else if (obj.recent[i].win === false) {
			winLabel.color = "#FF200C";
			winLabel.text = "Lost ";
			// winLoss = "Lost";
		}
		;
		viewContainer3.add(buttonView2);
		viewContainer3.add(matchView);
		//viewContainer3.add(winLabel, kdaLabel, csLabel, timeLabel);
	}
	
	// viewContainer2.add(buttonView);
	// viewContainer2.add(statsView);
buttonView.add(infoButton);
buttonView.add(matchButton);
infoWin.add(buttonView);
	infoWin.add(viewContainer2);
	infoWin.open();
	//viewContainer.add(label);

};
exports.buildUI = buildUI;
