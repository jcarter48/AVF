var getData = function(){
	
	var onLoad = function(){
		
		var result = JSON.parse(this.responseText);
		//console.log(result);
		
		var weatherArray = [];
		
		for(var i=0, j=result.data.children.length; i<j; i++){
			weatherArray.push ({ 
				title: result.data.children[i].data.title,
				author: result.data.children[i].data.author,
				thumb : result.data.children[i].data.thumbnail 
			});
		} 
		//console.log(weatherArray);
		
		var dbModule = require("database");
		dbModule.save(weatherArray);
		
	};
	
	var onError = function(x){
		console.log("error getting data", x.error);
	};
	
	var xhr = Ti.Network.createHTTPClient({
		onload: onLoad,
		onerror: onError,
		timeout: 3000
	});
	var url = "https://api.weather.com/r/aww";
	
	xhr.open("GET", url);
	xhr.send();	
};
exports.getData = getData;
